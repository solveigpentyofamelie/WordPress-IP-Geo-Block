/*!
 * Project: whois.js - get whois infomation
 * Description: A jQuery plugin to get whois infomation from RIPE NCC database.
 * Version: 0.1
 * Copyright (c) 2016 tokkonopapa (tokkonopapa@yahoo.com)
 * This software is released under the MIT License.
 */
(function(f){f.extend({whois:function(k,d){var e=[];f.ajax({url:'https://query.yahooapis.com/v1/public/yql?q=select * from xml where url="%URL%"&format=json&jsonCompat=new'.replace(/%URL%/,"https://rest.db.ripe.net/search%3fflags=no-filtering%26flags=resource%26query-string="+k),method:"GET",dataType:"json"}).done(function(b,c,d){function h(b,a){if(a&&"object"===typeof a)if(a.errormessage){var c=a.errormessage,d=c.text.split(/\n+/);e.push({name:c.severity,value:d[1].replace(/%s/,c.args.value)})}else a.href?e.push({name:b,value:'<a href="'+a.href+'.json" target=_blank>'+a.href+"</a>"}):a.name&&a.value?(a.link?a.value='<a href="'+a.link.href+'.json" target=_blank>'+a.value+"</a>":"remarks"===a.name&&(a.value=a.value.replace(/(https?:\/\/[^\s]+)/gi,'<a href="$1" target=_blank>$1</a>')),e.push({name:a.name,value:a.value})):"primary-key"!==b&&f.each(a,function(a,b){h(a,b)})}var g;b=b.query.results;c=[];for(g in b)if(b.hasOwnProperty(g)){c=b[g];break}h(null,c)}).fail(function(b,c,d){e.push({name:c,value:d})}).always(function(){e.push({name:"copyright",value:'<a href="https://apps.db.ripe.net/search/query.html" title="Database Query - RIPE Network Coordination Centre">RIPE NCC</a>'});d&&d(e)})}})})(jQuery);